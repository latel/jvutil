{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["// 浮点数安全的计算模块\n// 数字相加\nexport const add = (arg1: number | string, arg2: number | string): number => {\n  var r1, r2, m, c;\n  var s1 = arg1.toString(),\n    s2 = arg2.toString();\n  try {\n    r1 = s1.split(\".\")[1].length;\n  } catch (e) {\n    r1 = 0;\n  }\n  try {\n    r2 = s2.split(\".\")[1].length;\n  } catch (e) {\n    r2 = 0;\n  }\n  c = Math.abs(r1 - r2);\n  m = Math.pow(10, Math.max(r1, r2));\n  if (c > 0) {\n    var cm = Math.pow(10, c);\n    if (r1 > r2) {\n      arg1 = Number(s1.replace(\".\", \"\"));\n      arg2 = Number(s2.replace(\".\", \"\")) * cm;\n    } else {\n      arg1 = Number(s1.replace(\".\", \"\")) * cm;\n      arg2 = Number(s2.replace(\".\", \"\"));\n    }\n  } else {\n    arg1 = Number(s1.replace(\".\", \"\"));\n    arg2 = Number(s2.replace(\".\", \"\"));\n  }\n  return (arg1 + arg2) / m;\n};\n\n// 数字相减\nexport const reduce = (arg1: number | string, arg2: number | string): number => {\n  arg1 = arg1.toString();\n  arg2 = arg2.toString();\n  var r1, r2, m, c;\n  try {\n    r1 = arg1.split(\".\")[1].length;\n  } catch (e) {\n    r1 = 0;\n  }\n  try {\n    r2 = arg2.split(\".\")[1].length;\n  } catch (e) {\n    r2 = 0;\n  }\n\n  c = Math.max(r1, r2);\n  m = Math.pow(10, c);\n  return +((+arg1 * m - +arg2 * m) / m).toFixed(c);\n};\n\n// 数字相乘\nexport const mul = (arg1: number | string, arg2: number | string) => {\n  var m = 0,\n    s1 = arg1.toString(),\n    s2 = arg2.toString();\n  try {\n    m += s1.split(\".\")[1].length;\n  } catch (e) {}\n  try {\n    m += s2.split(\".\")[1].length;\n  } catch (e) {}\n  return (\n    (Number(s1.replace(\".\", \"\")) * Number(s2.replace(\".\", \"\"))) /\n    Math.pow(10, m)\n  );\n};\n\n// 数字相除\nexport const div = (arg1: number | string, arg2: number | string, acc: number = 2): number => {\n  var t1 = 0,\n    t2 = 0,\n    r1,\n    r2,\n    c;\n  try {\n    t1 = arg1.toString().split(\".\")[1].length;\n  } catch (e) {}\n  try {\n    t2 = arg2.toString().split(\".\")[1].length;\n  } catch (e) {}\n  c = Math.max(t1, t2, acc);\n  r1 = Number(arg1.toString().replace(\".\", \"\"));\n  r2 = Number(arg2.toString().replace(\".\", \"\"));\n  if (r2 === 0) {\n    throw RangeError(\"no one can be dived by zero\");\n  }\n  return +((r1 / r2) * Math.pow(10, t2 - t1)).toFixed(c);\n};\n\n/**\n * 取模操作\n * @param dividend 目标数字\n * @param divisor 模\n * @returns 余数\n */\nexport const modulo = (dividend: number | string, divisor: number | string): number => {\n  const dividendDecimalLen = (String(dividend).split(\".\")[1] || \"\").length || 0;\n  const divisorDecimalLen = (String(divisor).split(\".\")[1] || \"\").length || 0;\n  const decimalLen = Math.max(dividendDecimalLen, divisorDecimalLen);\n  const a = mul(dividend, Math.pow(10, decimalLen));\n  const b = mul(divisor, Math.pow(10, decimalLen));\n  return a % b;\n};\n"],"names":["add","arg1","arg2","r1","r2","m","c","s1","toString","s2","split","length","e","Math","abs","pow","max","cm","Number","replace","reduce","toFixed","mul","div","acc","t1","t2","RangeError","modulo","dividend","divisor","dividendDecimalLen","String","divisorDecimalLen","decimalLen"],"mappings":"AAEaA,IAAAA,EAAM,SAACC,EAAuBC,GACzC,IAAIC,EAAIC,EAAIC,EAAGC,EACXC,EAAKN,EAAKO,WACZC,EAAKP,EAAKM,WACZ,IACEL,EAAKI,EAAGG,MAAM,KAAK,GAAGC,OACtB,MAAOC,GACPT,EAAK,EAEP,IACEC,EAAKK,EAAGC,MAAM,KAAK,GAAGC,OACtB,MAAOC,GACPR,EAAK,EAIP,GAFAE,EAAIO,KAAKC,IAAIX,EAAKC,GAClBC,EAAIQ,KAAKE,IAAI,GAAIF,KAAKG,IAAIb,EAAIC,IAC1BE,EAAI,EAAG,CACT,IAAIW,EAAKJ,KAAKE,IAAI,GAAIT,GAClBH,EAAKC,GACPH,EAAOiB,OAAOX,EAAGY,QAAQ,IAAK,KAC9BjB,EAAOgB,OAAOT,EAAGU,QAAQ,IAAK,KAAOF,IAErChB,EAAOiB,OAAOX,EAAGY,QAAQ,IAAK,KAAOF,EACrCf,EAAOgB,OAAOT,EAAGU,QAAQ,IAAK,WAGhClB,EAAOiB,OAAOX,EAAGY,QAAQ,IAAK,KAC9BjB,EAAOgB,OAAOT,EAAGU,QAAQ,IAAK,KAEhC,OAAQlB,EAAOC,GAAQG,GAIZe,EAAS,SAACnB,EAAuBC,GAG5C,IAAIC,EAAIC,EAAIC,EAAGC,EAFfL,EAAOA,EAAKO,WACZN,EAAOA,EAAKM,WAEZ,IACEL,EAAKF,EAAKS,MAAM,KAAK,GAAGC,OACxB,MAAOC,GACPT,EAAK,EAEP,IACEC,EAAKF,EAAKQ,MAAM,KAAK,GAAGC,OACxB,MAAOC,GACPR,EAAK,EAKP,OAFAE,EAAIO,KAAKG,IAAIb,EAAIC,OAENH,GADXI,EAAIQ,KAAKE,IAAI,GAAIT,KACMJ,EAAOG,GAAKA,GAAGgB,QAAQf,IAInCgB,EAAM,SAACrB,EAAuBC,GACzC,IAAIG,EAAI,EACNE,EAAKN,EAAKO,WACVC,EAAKP,EAAKM,WACZ,IACEH,GAAKE,EAAGG,MAAM,KAAK,GAAGC,OACtB,MAAOC,IACT,IACEP,GAAKI,EAAGC,MAAM,KAAK,GAAGC,OACtB,MAAOC,IACT,OACGM,OAAOX,EAAGY,QAAQ,IAAK,KAAOD,OAAOT,EAAGU,QAAQ,IAAK,KACtDN,KAAKE,IAAI,GAAIV,IAKJkB,EAAM,SAACtB,EAAuBC,EAAuBsB,YAAAA,IAAAA,EAAc,GAC9E,IAEErB,EACAC,EACAE,EAJEmB,EAAK,EACPC,EAAK,EAIP,IACED,EAAKxB,EAAKO,WAAWE,MAAM,KAAK,GAAGC,OACnC,MAAOC,IACT,IACEc,EAAKxB,EAAKM,WAAWE,MAAM,KAAK,GAAGC,OACnC,MAAOC,IAIT,GAHAN,EAAIO,KAAKG,IAAIS,EAAIC,EAAIF,GACrBrB,EAAKe,OAAOjB,EAAKO,WAAWW,QAAQ,IAAK,KAE9B,KADXf,EAAKc,OAAOhB,EAAKM,WAAWW,QAAQ,IAAK,MAEvC,MAAMQ,WAAW,+BAEnB,QAAUxB,EAAKC,EAAMS,KAAKE,IAAI,GAAIW,EAAKD,IAAKJ,QAAQf,IASzCsB,EAAS,SAACC,EAA2BC,GAChD,IAAMC,GAAsBC,OAAOH,GAAUnB,MAAM,KAAK,IAAM,IAAIC,QAAU,EACtEsB,GAAqBD,OAAOF,GAASpB,MAAM,KAAK,IAAM,IAAIC,QAAU,EACpEuB,EAAarB,KAAKG,IAAIe,EAAoBE,GAGhD,OAFUX,EAAIO,EAAUhB,KAAKE,IAAI,GAAImB,IAC3BZ,EAAIQ,EAASjB,KAAKE,IAAI,GAAImB"}